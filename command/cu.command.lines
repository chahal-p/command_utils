#!/usr/bin/env bash

function usage() {
  echo "Usage: $(basename "$0") <command> [args...]"
  echo "  <command>: The command to run on each line of the input from stdin"
  exit 1
}

if [[ $# -eq 0 || "$1" == "-h" || "$1" == "--help" ]]; then
  usage
  exit 1
fi

while IFS= read -r line; do
  cat <<< "$line" | "$@"
done
