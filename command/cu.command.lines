#!/usr/bin/env bash

source cu.errors_lib.bash || exit

function usage() {
  echo "Usage: $(basename "$0") <command> [args...]"
  echo "  <command>: The command to run on each line of the input from stdin"
}

if [[ $# -eq 0 || "$1" == "-h" || "$1" == "--help" ]]; then
  usage
  cu.errors.die_usage
fi

while IFS= read -r line; do
  cat <<< "$line" | "$@"
done
